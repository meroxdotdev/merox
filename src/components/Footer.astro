---
import { SOCIAL_LINKS, SITE } from '@/consts'
import Link from '@/components/Link.astro'
import { Icon } from 'astro-icon/components'
import { ICON_MAP } from '@/consts'

const currentYear = new Date().getFullYear()
const footerSocials = SOCIAL_LINKS.filter(link => link.label !== 'RSS')
---

<footer class="border-t border-border/60 dark:border-border/40" role="contentinfo">
  <div class="mx-auto max-w-4xl px-4 py-6 sm:py-5">
    <div class="flex flex-col items-center gap-5 sm:flex-row sm:justify-between sm:items-center sm:gap-6">
      
      <!-- Copyright + Navigation -->
      <div class="flex flex-col items-center gap-4 sm:flex-row sm:items-center sm:gap-4 sm:gap-y-0">
        <span class="text-xs text-muted-foreground">&copy; {currentYear} Robert Melcher</span>
        
        <span class="hidden sm:inline text-border/50 text-xs">|</span>
        
        <nav class="flex flex-wrap items-center justify-center gap-x-3 gap-y-2 text-xs text-muted-foreground sm:gap-3" aria-label="Footer navigation">
          <Link href="/blog/" class="hover:text-foreground transition-colors">Blog</Link>
          <span class="text-border/50">·</span>
          <Link href="/projects/" class="hover:text-foreground transition-colors">Projects</Link>
          <span class="text-border/50">·</span>
          <Link href="/music/" class="hover:text-foreground transition-colors">Tunes</Link>
          <span class="text-border/50">·</span>
          <Link href="/tags/" class="hover:text-foreground transition-colors">Tags</Link>
          <span class="text-border/50">·</span>
          <Link href="/about/" class="hover:text-foreground transition-colors">About</Link>
        </nav>
      </div>
      
      <!-- Legal + Social -->
      <div class="flex flex-col items-center gap-4 sm:flex-row sm:items-center sm:gap-4 sm:gap-y-0">
        <div class="flex items-center gap-3 text-xs text-muted-foreground">
          <Link href="/privacy/" class="hover:text-foreground transition-colors">Privacy</Link>
          <span class="text-border/50">·</span>
          <Link href="/terms/" class="hover:text-foreground transition-colors">Terms</Link>
        </div>
        
        <span class="hidden sm:inline text-border/30">|</span>
        
        <div class="flex items-center gap-1">
          {footerSocials.map(({ href, label }) => (
            <Link
              href={href}
              aria-label={label}
              title={label}
              class="p-2 sm:p-1.5 text-muted-foreground hover:text-foreground transition-colors"
              external
            >
              <Icon
                name={ICON_MAP[label as keyof typeof ICON_MAP] || 'lucide:link'}
                class="size-4 sm:size-3.5"
              />
            </Link>
          ))}
          <Link
            href="/rss.xml"
            aria-label="RSS Feed"
            title="RSS Feed"
            class="p-2 sm:p-1.5 text-muted-foreground hover:text-foreground transition-colors"
          >
            <Icon name="lucide:rss" class="size-4 sm:size-3.5" />
          </Link>
        </div>
      </div>
    </div>
  </div>
</footer>
