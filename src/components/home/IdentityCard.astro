---
import Link from '@/components/Link.astro'
import { Icon } from 'astro-icon/components'
import { Image } from 'astro:assets'
import type { ImageMetadata } from 'astro'

interface Props {
  jobTitle: string
  worksFor: string
  heroImageLight: ImageMetadata
  heroImageDark: ImageMetadata
}

const { jobTitle, worksFor, heroImageLight, heroImageDark } = Astro.props
---

<div class="bento-card bento-identity">
  <div class="bento-identity__content">
    <p class="identity-role panel-title" aria-label={`${jobTitle} at ${worksFor}`}>
      <span class="identity-role__dot" aria-hidden="true"></span>
      {jobTitle}<span class="identity-role__sep" aria-hidden="true">/</span>{worksFor}
    </p>
    <h1 class="text-3xl sm:text-4xl md:text-5xl font-black tracking-tighter uppercase leading-[0.92] break-words">
      Building<br />infrastructure<br /><span class="text-primary transition-colors duration-300">that scales</span>.
    </h1>
    <p class="mt-4 text-sm md:text-[15px] text-muted-foreground/75 max-w-md leading-relaxed">
      Technical blog on infrastructure, homelab, and automation — and the person behind it. For people who run systems.
    </p>
    <div class="flex flex-wrap items-center gap-4 mt-6">
      <Link href="/blog" class="btn-neo-primary" aria-label="Read the blog">
        Read the blog
        <Icon name="lucide:arrow-right" class="btn-neo-icon" aria-hidden="true" />
      </Link>
      <Link href="/about" class="btn-neo-outline" aria-label="About me">
        <Icon name="lucide:user" class="btn-neo-icon" aria-hidden="true" />
        About me
      </Link>
    </div>
  </div>
  <!-- Photo: one frame (90%, offset), both theme images fill it — same layout light/dark -->
  <div class="bento-identity__image overflow-hidden relative">
    <div class="hero-img-inner relative w-full h-full">
      <div class="hero-img-frame">
        <Image
          src={heroImageLight}
          alt="Robert Melcher in datacenter"
          widths={[300, 500, 600, heroImageLight.width]}
          sizes="(max-width: 768px) 100vw, 340px"
          loading="eager"
          fetchpriority="high"
          class="absolute inset-0 w-full h-full object-contain object-center dark:opacity-0 dark:pointer-events-none"
        />
        <Image
          src={heroImageDark}
          alt="Robert Melcher in datacenter"
          widths={[300, 500, 600, heroImageDark.width]}
          sizes="(max-width: 768px) 100vw, 340px"
          loading="eager"
          fetchpriority="high"
          class="absolute inset-0 w-full h-full object-contain object-center opacity-0 pointer-events-none dark:opacity-100 dark:pointer-events-auto"
        />
      </div>
    </div>
  </div>
</div>
