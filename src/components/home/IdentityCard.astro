---
import Link from '@/components/Link.astro'
import { Icon } from 'astro-icon/components'
import { Image } from 'astro:assets'
import type { ImageMetadata } from 'astro'

interface Props {
  jobTitle: string
  worksFor: string
  heroImageLight: ImageMetadata
  heroImageDark: ImageMetadata
}

const { jobTitle, worksFor, heroImageLight, heroImageDark } = Astro.props
---

<div class="bento-card bento-identity">
  <div class="bento-identity__content">
    <p class="identity-role panel-title" aria-label={`${jobTitle} at ${worksFor}`}>
      <span class="identity-role__dot" aria-hidden="true"></span>
      {jobTitle}<span class="identity-role__sep" aria-hidden="true">/</span>{worksFor}
    </p>
    <h1 class="identity-title font-black tracking-tighter uppercase leading-[0.92]">
      <span class="identity-title__line">Building</span><br />
      <span class="identity-title__line">infrastructure</span><br />
      <span class="identity-title__line text-primary transition-colors duration-300">that scales.</span>
    </h1>
    <p class="mt-4 text-sm md:text-[15px] text-muted-foreground/75 max-w-md leading-relaxed">
      A blog about self-hosting, Linux, and the IT grind. I look for the logic behind the code and the patterns behind the noise — because life is better when both your bike and your mind run clear.
    </p>
    <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4 mt-6">
      <Link
        href="/blog"
        class="btn-neo-primary min-h-[var(--touch-target-min)] sm:min-h-0 w-full sm:w-auto"
        aria-label="Read the blog"
      >
        Read the blog
        <Icon name="lucide:arrow-right" class="btn-neo-icon" aria-hidden="true" />
      </Link>
      <Link
        href="/about"
        class="btn-neo-outline min-h-[var(--touch-target-min)] sm:min-h-0 w-full sm:w-auto"
        aria-label="About me"
      >
        <Icon name="lucide:user" class="btn-neo-icon" aria-hidden="true" />
        About me
      </Link>
    </div>
  </div>
  <!-- Photo: one frame (90%, offset), theme-aware image loading — optimized for 2026 -->
  <div class="bento-identity__image overflow-hidden relative">
    <div class="hero-img-inner relative w-full h-full">
      <div class="hero-img-frame">
        {/* Light theme image - LCP optimized, eager load */}
        <Image
          src={heroImageLight}
          alt="Robert Melcher in datacenter"
          widths={[300, 500, 600, heroImageLight.width]}
          sizes="(max-width: 768px) 100vw, 340px"
          loading="eager"
          fetchpriority="high"
          class="absolute inset-0 w-full h-full object-contain object-center dark:hidden"
        />
        {/* Dark theme image - lazy loaded, browser won't download until dark mode is active */}
        <Image
          src={heroImageDark}
          alt="Robert Melcher in datacenter"
          widths={[300, 500, 600, heroImageDark.width]}
          sizes="(max-width: 768px) 100vw, 340px"
          loading="lazy"
          class="absolute inset-0 w-full h-full object-contain object-center hidden dark:block"
        />
      </div>
    </div>
  </div>
</div>
