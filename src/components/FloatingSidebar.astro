---
import { Icon } from 'astro-icon/components'
---

<div
  id="floating-sidebar"
  class="fixed right-6 top-1/2 -translate-y-1/2 z-40 hidden xl:block opacity-0 animate-fade-in"
  aria-label="Support and advertising"
>
  <div class="flex flex-col gap-3 w-56">
    <!-- Support Card -->
    <div
      class="group relative overflow-hidden rounded-lg border border-border/40 bg-background/80 backdrop-blur-md shadow-sm hover:shadow-md hover:border-border/60 transition-all duration-300"
    >
      <div class="p-4">
        <div class="mb-3">
          <h3 class="text-sm font-medium text-foreground mb-1.5">
            Support My Work
          </h3>
          <p class="text-xs text-muted-foreground leading-snug">
            Help fuel the server and keep the content coming
          </p>
        </div>
        <a
          href="https://buymeacoffee.com/merox.dev"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center justify-center gap-1.5 w-full px-3 py-2 rounded-md bg-primary text-primary-foreground text-xs font-medium transition-all duration-200 hover:bg-primary/90 active:scale-[0.98]"
        >
          <Icon name="lucide:coffee" class="w-3.5 h-3.5" />
          <span>Buy Me a Coffee</span>
        </a>
      </div>
    </div>

    <!-- Advertising Card -->
    <div
      class="group relative overflow-hidden rounded-lg border border-border/40 bg-background/80 backdrop-blur-md shadow-sm hover:shadow-md hover:border-border/60 transition-all duration-300"
    >
      <div class="p-4">
        <div class="mb-3">
          <h3 class="text-sm font-medium text-foreground mb-1.5">
            Advertise Here
          </h3>
          <p class="text-xs text-muted-foreground leading-snug mb-2.5">
            Reach a tech-savvy audience interested in infrastructure, DevOps, and homelab content
          </p>
        </div>
        <a
          href="mailto:hello@merox.dev?subject=Advertising Inquiry"
          class="inline-flex items-center justify-center gap-1.5 w-full px-3 py-2 rounded-md border border-border/60 bg-background text-foreground text-xs font-medium transition-all duration-200 hover:bg-muted/50 hover:border-border active:scale-[0.98] mb-2.5"
        >
          <Icon name="lucide:mail" class="w-3.5 h-3.5" />
          <span>Contact for Ads</span>
        </a>
        <div class="pt-2.5 border-t border-border/40">
          <p class="text-[10px] text-muted-foreground/80 text-center leading-tight">
            Ad space available
            <span class="block mt-0.5 opacity-60">Desktop only</span>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Fade-in animation on page load */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translate(10px, -50%);
    }
    to {
      opacity: 1;
      transform: translate(0, -50%);
    }
  }

  #floating-sidebar.animate-fade-in {
    animation: fade-in 0.4s ease-out 0.2s forwards;
  }

  /* Respect user motion preferences */
  @media (prefers-reduced-motion: reduce) {
    #floating-sidebar *,
    #floating-sidebar {
      transition: none !important;
      animation: none !important;
      opacity: 1 !important;
      transform: translateY(-50%) !important;
    }
  }

  /* Responsive positioning - ensures sidebar doesn't overlap content */
  @media (min-width: 1280px) {
    #floating-sidebar {
      right: 1.5rem;
    }
  }

  /* On medium desktop screens, ensure adequate spacing from content */
  @media (min-width: 1280px) and (max-width: 1400px) {
    #floating-sidebar {
      right: 1rem;
    }
  }

  @media (min-width: 1920px) {
    #floating-sidebar {
      right: 2rem;
    }
  }

  /* Hide on mobile and tablet */
  @media (max-width: 1279px) {
    #floating-sidebar {
      display: none !important;
    }
  }
</style>
