---
import Breadcrumbs from '@/components/Breadcrumbs.astro'
import PageHead from '@/components/PageHead.astro'
import Link from '@/components/Link.astro'
import Layout from '@/layouts/Layout.astro'
import { Icon } from 'astro-icon/components'

const techStack = {
  hpc: [
    { name: 'PBS Pro', icon: 'lucide:server' },
    { name: 'InfiniBand', icon: 'lucide:network' },
    { name: 'iDRAC', icon: 'lucide:hard-drive' },
    { name: 'Altair', icon: 'lucide:cpu' },
  ],
  cloud: [
    { name: 'AWS', icon: 'simple-icons:amazonwebservices' },
    { name: 'Oracle Cloud', icon: 'simple-icons:oracle' },
    { name: 'Docker', icon: 'simple-icons:docker' },
    { name: 'Kubernetes', icon: 'simple-icons:kubernetes' },
    { name: 'Proxmox', icon: 'lucide:server-cog' },
    { name: 'Rancher', icon: 'simple-icons:rancher' },
  ],
  devops: [
    { name: 'Terraform', icon: 'simple-icons:terraform' },
    { name: 'Ansible', icon: 'simple-icons:ansible' },
    { name: 'Puppet', icon: 'simple-icons:puppet' },
    { name: 'Salt', icon: 'simple-icons:saltproject' },
    { name: 'GitOps', icon: 'simple-icons:git' },
    { name: 'Flux', icon: 'simple-icons:flux' },
  ],
  security: [
    { name: 'CCNA', icon: 'simple-icons:cisco' },
    { name: 'Fortinet', icon: 'simple-icons:fortinet' },
    { name: 'Palo Alto', icon: 'lucide:shield' },
    { name: 'Nessus', icon: 'lucide:scan' },
    { name: 'StrongSwan', icon: 'lucide:lock' },
    { name: 'CyberArk', icon: 'lucide:key-round' },
  ]
}

const experiences = [
  {
    title: 'HPC System Administrator',
    company: 'Forvia',
    period: '2022 – Present',
    description: 'Enterprise HPC cluster management, datacenter deployments, InfiniBand networking, PBS scheduling',
    current: true
  },
  {
    title: 'Cybersecurity Engineer',
    company: 'Atos',
    period: '2020 – 2022',
    description: 'Firewall policy management, CyberArk PAM, Forescout NAC',
    current: false
  },
  {
    title: 'System Administrator',
    company: 'Netex Romania',
    period: '2018 – 2020',
    description: 'Puppet to K8s migration, Asterisk VOIP, datacenter operations',
    current: false
  }
]

const highlights = [
  'Full datacenter deployments with InfiniBand clusters at Forvia',
  'Homelab Kubernetes cluster with Talos Linux, Flux GitOps, and Cilium CNI',
  'Proxmox virtualization with automated deployments on Dell R720',
  'pfSense firewall with VLAN segmentation and WAF security',
  'AWS/EC2 applications and Oracle Ampere ARM testing',
  'Infrastructure automation with cert-manager, external-dns, and SOPS secrets'
]
---

<Layout class="max-w-3xl">
  <PageHead slot="head" title="About" />
  <Breadcrumbs items={[{ label: 'About', icon: 'lucide:user' }]} />

  <section class="flex flex-col gap-y-6">
    <!-- Profile Header -->
    <div class="rounded-lg border">
      <div class="p-6">
        <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4">
          <div class="space-y-2">
            <h1 class="text-3xl font-medium">Robert Melcher</h1>
            <p class="text-muted-foreground">HPC System Administrator @ Forvia</p>
            <p class="text-sm text-muted-foreground max-w-xl">
              Building secure, scalable infrastructures with 9+ years of experience in HPC operations, 
              DevOps automation, and cybersecurity
            </p>
          </div>
          <Link 
            href="/robert-melcher-cv.pdf" 
            external 
            class="inline-flex items-center gap-2 px-4 py-2 rounded-md border bg-card hover:bg-accent transition-colors shrink-0 text-sm"
          >
            <Icon name="lucide:download" class="size-4" />
            <span>Download CV</span>
          </Link>
        </div>
      </div>
    </div>

    <!-- Content Grid -->
    <div class="flex flex-col gap-y-6">
      
      <!-- Tech Stack -->
      <div class="rounded-lg border">
        <div class="p-6">
          <h2 class="text-2xl font-medium mb-4">Tech Stack</h2>
          
          <div class="grid sm:grid-cols-2 gap-6">
            <div class="space-y-2">
              <p class="text-xs font-medium uppercase tracking-wide text-muted-foreground">HPC & Infrastructure</p>
              <div class="flex flex-wrap gap-1.5">
                {techStack.hpc.map((tech) => (
                  <span class="px-2 py-1 text-xs rounded-md bg-primary/10 text-primary inline-flex items-center gap-1">
                    <Icon name={tech.icon} class="size-3" />
                    {tech.name}
                  </span>
                ))}
              </div>
            </div>

            <div class="space-y-2">
              <p class="text-xs font-medium uppercase tracking-wide text-muted-foreground">Cloud & Virtualization</p>
              <div class="flex flex-wrap gap-1.5">
                {techStack.cloud.map((tech) => (
                  <span class="px-2 py-1 text-xs rounded-md bg-primary/10 text-primary inline-flex items-center gap-1">
                    <Icon name={tech.icon} class="size-3" />
                    {tech.name}
                  </span>
                ))}
              </div>
            </div>

            <div class="space-y-2">
              <p class="text-xs font-medium uppercase tracking-wide text-muted-foreground">DevOps & Automation</p>
              <div class="flex flex-wrap gap-1.5">
                {techStack.devops.map((tech) => (
                  <span class="px-2 py-1 text-xs rounded-md bg-primary/10 text-primary inline-flex items-center gap-1">
                    <Icon name={tech.icon} class="size-3" />
                    {tech.name}
                  </span>
                ))}
              </div>
            </div>

            <div class="space-y-2">
              <p class="text-xs font-medium uppercase tracking-wide text-muted-foreground">Security & Networking</p>
              <div class="flex flex-wrap gap-1.5">
                {techStack.security.map((tech) => (
                  <span class="px-2 py-1 text-xs rounded-md bg-primary/10 text-primary inline-flex items-center gap-1">
                    <Icon name={tech.icon} class="size-3" />
                    {tech.name}
                  </span>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Experience -->
      <div class="rounded-lg border">
        <div class="p-6">
          <h2 class="text-2xl font-medium mb-4">Experience</h2>
          
          <div class="space-y-6">
            {experiences.map((exp, index) => (
              <div class={`relative pl-6 ${index < experiences.length - 1 ? 'pb-6' : ''}`}>
                <div class={`absolute left-0 top-1 size-3 rounded-full ${exp.current ? 'bg-primary ring-4 ring-primary/20' : 'bg-muted'}`}></div>
                {index < experiences.length - 1 && (
                  <div class="absolute left-[5px] top-4 bottom-0 w-0.5 bg-border"></div>
                )}
                <div class="space-y-1">
                  <h3 class="font-medium">{exp.title}</h3>
                  <p class="text-sm text-muted-foreground">{exp.company} • {exp.period}</p>
                  <p class="text-sm text-muted-foreground/80">
                    {exp.description}
                  </p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>

      <!-- Key Projects -->
      <div class="rounded-lg border">
        <div class="p-6">
          <h2 class="text-2xl font-medium mb-4">Key Projects</h2>
          
          <ul class="space-y-3">
            {highlights.map((highlight) => (
              <li class="flex gap-3 text-sm text-muted-foreground">
                <Icon name="lucide:check-circle-2" class="size-4 text-primary shrink-0 mt-0.5" />
                <span>{highlight}</span>
              </li>
            ))}
          </ul>
        </div>
      </div>

      <!-- Education -->
      <div class="rounded-lg border">
        <div class="p-6">
          <h2 class="text-2xl font-medium mb-4">Education</h2>
          
          <div class="space-y-4">
            <div>
              <h3 class="font-medium">Computer Science</h3>
              <p class="text-sm text-muted-foreground">West University of Timișoara • 2016–2018</p>
            </div>

            <div class="pt-4 border-t">
              <h3 class="font-medium">CCNA Certification</h3>
              <p class="text-sm text-muted-foreground">Cisco • 2019–2020</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Merox Origin -->
      <div class="rounded-lg border">
        <div class="p-6">
          <h2 class="text-2xl font-medium mb-3">Why "Merox"?</h2>
          
          <p class="text-sm font-mono bg-primary/10 text-primary rounded-md p-3 mb-2">
            <span class="font-bold">ME</span>(lcher) + <span class="font-bold">RO</span>(bert) + <span class="font-bold">X</span>
          </p>
          <p class="text-xs text-muted-foreground italic">
            formerly mer0x39 → 0x39 = 57 = July 5th birthday
          </p>
        </div>
      </div>

    </div>
  </section>
</Layout>

<style>
  /* Smooth animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  section > div {
    animation: fadeInUp 0.6s ease-out;
  }

  /* Stagger children animations */
  .grid > div:nth-child(1) { animation-delay: 0.1s; }
  .grid > div:nth-child(2) { animation-delay: 0.2s; }
  .grid > div:nth-child(3) { animation-delay: 0.3s; }
  .grid > div:nth-child(4) { animation-delay: 0.4s; }
  .grid > div:nth-child(5) { animation-delay: 0.5s; }
  .grid > div:nth-child(6) { animation-delay: 0.6s; }
</style>